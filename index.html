<!DOCTYPE html>
<html lang="en">

<head>
    <title>We love MJU</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <meta name="google-site-verification" content="FKRaatVSB-9wikBVEFmazld5UbeYewKwmvPmNbmE-s4" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="google-site-verification" content="FKRaatVSB-9wikBVEFmazld5UbeYewKwmvPmNbmE-s4" />
    <meta property="og:image" content="https://scontent-sit4-1.xx.fbcdn.net/v/t1.0-9/18920661_10211546284406801_6247058727791902964_n.jpg?oh=35170c540b31fe501d9da002f9127bda&oe=59B18ED8"
    />
    <meta property="og:description" content="สร้างรูป Prifile ชาวแม่โจ้" />

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-19876272-3', 'auto');
        ga('send', 'pageview');
    </script>


</head>

<body onload="init()">
    <div class="container-fluid">
        <h1>MJU Profile</h1>
        <p></p>
        <div class="row">
            <div class="col-sm-6 " style="background-color:#fff;">
                <canvas id="green" height="150"></canvas><br></br>
                <canvas id="white" height="150"></canvas><br></br>
                <canvas id="yellow" height="150"></canvas><br></br>
            </div>
            <div class="col-sm-6" style="background-color:lavenderblush;">

                <div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">ข้อความ
                        <input id="topText" class="mdl-textfield__input" value="กลิ่นศักดิ์ ม. ร ๔๐๑" onkeyup="render()">
                    </div>
                    <div>ขนาดตัวอักษร (บน) </div>
                    <input id="nameSize" class="mdl-slider mdl-js-slider" type="range" min="0" max="100" value="58" oninput="render()" onchange="render()">
                    <div>ตำแหน่งชื่อ แนวนอน </div>
                    <input id="namePosotionY" class="mdl-slider mdl-js-slider" type="range" min="0" max="500" value="358" oninput="render()"
                        onchange="render()">
                    <div>ตำแหน่งชื่อ แนวตั้ง </div>
                    <input id="namePosotionX" class="mdl-slider mdl-js-slider" type="range" min="0" max="130" value="76" oninput="render()" onchange="render()">
                </div>

                <div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">ข้อความ
                        <input id="midText" class="mdl-textfield__input" value="ลูกแม่โจ้ ๗๒" onkeyup="render()">
                    </div>
                    <div>ขนาดตัวอักษร (กลาง) </div>
                    <input id="midleSize" class="mdl-slider mdl-js-slider" type="range" min="0" max="100" value="58" oninput="render()" onchange="render()">
                    <div>ตำแหน่งชื่อ แนวนอน </div>
                    <input id="midlePosotionY" class="mdl-slider mdl-js-slider" type="range" min="0" max="500" value="334" oninput="render()"
                        onchange="render()">
                    <div>ตำแหน่งชื่อ แนวตั้ง </div>
                    <input id="midlePosotionX" class="mdl-slider mdl-js-slider" type="range" min="45" max="130" value="76" oninput="render()"
                        onchange="render()">
                </div>

                <div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">ข้อความ
                        <input id="bottomText" class="mdl-textfield__input" value="" onkeyup="render()">
                    </div>
                    <div>ขนาดตัวอักษร (ล่าง) </div>
                    <input id="bottomSize" class="mdl-slider mdl-js-slider" type="range" min="0" max="100" value="37" oninput="render()" onchange="render()">
                    <div>ตำแหน่งชื่อ แนวนอน </div>
                    <input id="bottomPosotionY" class="mdl-slider mdl-js-slider" type="range" min="0" max="500" value="274" oninput="render()"
                        onchange="render()">
                    <div>ตำแหน่งชื่อ แนวตั้ง </div>
                    <input id="bottomPosotionX" class="mdl-slider mdl-js-slider" type="range" min="45" max="130" value="83" oninput="render()"
                        onchange="render()">
                </div>
                <div style="margin-top: 30px; margin-bottom: 50px; ">
                    <a id="download" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" style="width:20%" onclick="downloadCanvas()"><i>Download</i> </a>
                </div>
            </div>
        </div>
    </div>
    <canvas id="export" width="600" height="420" style="display: none;"></canvas>
</body>
<script>
        window.addEventListener('resize', render);
        function init() {

            if (detectmob()) {
                var topSize = document.getElementById('nameSize');
                var midleSize = document.getElementById('midleSize');
                var bottomSize = document.getElementById('bottomSize');


                topSize.value = 30;
                midleSize.value = midleSize.value - (window.innerWidth * 3 / 100);
                bottomSize.value = bottomSize.value - (window.innerWidth * 3 / 100);

                var namePosotionY = document.getElementById('namePosotionY');
                var midlePosotionY = document.getElementById('midlePosotionY');
                var bottomPosotionY = document.getElementById('bottomPosotionY');

                namePosotionY.value = 180;
                midlePosotionY.value = 180;
                bottomPosotionY.value = 72;

                var downloadBtn = document.getElementById('download');
                downloadBtn.style = "width:30%";

            }

            render();
        }

        function detectmob() {
            if (navigator.userAgent.match(/Android/i)
                || navigator.userAgent.match(/webOS/i)
                || navigator.userAgent.match(/iPhone/i)
                || navigator.userAgent.match(/iPad/i)
                || navigator.userAgent.match(/iPod/i)
                || navigator.userAgent.match(/BlackBerry/i)
                || navigator.userAgent.match(/Windows Phone/i)
            ) {
                return true;
            }
            else {
                return false;
            }
        }

        function render() {
            var fac = (window.innerWidth * 10 / 100);
            var exportCanvas = document.getElementById("export");
            var topText = document.getElementById("topText");
            var nameSize = document.getElementById('nameSize');
            var namePosotionY = document.getElementById('namePosotionY');
            var namePosotionX = document.getElementById('namePosotionX');

            var midText = document.getElementById("midText");
            var midleSize = document.getElementById('midleSize');
            var midlePosotionY = document.getElementById('midlePosotionY');
            var midlePosotionX = document.getElementById('midlePosotionX');

            var bottomText = document.getElementById('bottomText');
            var bottomSize = document.getElementById('bottomSize');
            var bottomPosotionY = document.getElementById('bottomPosotionY');
            var bottomPosotionX = document.getElementById('bottomPosotionX');

            var green = document.getElementById('green');
            var white = document.getElementById('white');
            var yellow = document.getElementById('yellow');

            var ctx = green.getContext('2d');
            var ctxWhite = white.getContext('2d');
            var ctxYellow = yellow.getContext('2d');

            //set canvas width
            green.width = window.innerWidth - (window.innerWidth * 10 / 100);
            white.width = window.innerWidth - (window.innerWidth * 10 / 100);
            yellow.width = window.innerWidth - (window.innerWidth * 10 / 100);
            exportCanvas.width = window.innerWidth - (window.innerWidth * 10 / 100);


            // fiil the canvas
            ctx.fillStyle = '#006400';
            ctx.fillRect(0, 0, green.width, green.height);

            ctxWhite.fillStyle = 'white';
            ctxWhite.fillRect(0, 0, white.width, white.height);

            ctxYellow.fillStyle = 'yellow';
            ctxYellow.fillRect(0, 0, yellow.width, yellow.height);




            // set the text
            ctx.font = nameSize.value + 'px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = 'white';  // a color name or by using rgb/rgba/hex values
            ctx.fillText(topText.value, namePosotionY.value, namePosotionX.value); // text and position

            ctxWhite.font = midleSize.value + 'px Arial';
            ctxWhite.textAlign = 'center';
            ctxWhite.textBaseline = 'middle';
            ctxWhite.fillStyle = '#006400';
            ctxWhite.fillText(midText.value, midlePosotionY.value, midlePosotionX.value);

            ctxYellow.font = bottomSize.value + 'px Arial';
            ctxYellow.textAlign = 'center';
            ctxYellow.textBaseline = 'middle';
            ctxYellow.fillStyle = '#000000';
            ctxYellow.fillText(bottomText.value, bottomPosotionY.value, bottomPosotionX.value);
        }

        function downloadCanvas() {
            var download = document.getElementById('download');
            var green = document.getElementById('green');
            var white = document.getElementById('white');
            var yellow = document.getElementById('yellow');
            var exportCanvas = document.getElementById('export');

            var exportContext = exportCanvas.getContext('2d');
            exportContext.drawImage(yellow, 0, 280);
            exportContext.drawImage(white, 0, 140);
            exportContext.drawImage(green, 0, 0);
            download.href = exportCanvas.toDataURL();
            download.download = "welovemju.png";
        }

</script>

</html>